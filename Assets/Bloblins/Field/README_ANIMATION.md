# Система анимации

## Компоненты

### AnimationQueue
Глобальный менеджер очереди анимаций. Автоматически добавляется к объекту Field через `[RequireComponent]`.

**Настройки в Inspector:**
- **Default Move Settings** — настройки движения по умолчанию для всех объектов

### AnimatableVisual
Компонент для индивидуальной настройки анимаций конкретного префаба.

**Настройки в Inspector:**
- **Move Settings** — индивидуальные настройки движения для этого префаба

### MoveAnimationSettings
Настройки анимации движения:
- **Speed** — скорость движения (единиц в секунду) — используется если Fixed Duration = 0
- **Curve** — кривая горизонтального движения (AnimationCurve)
- **Jump Height** — высота прыжка (0 = без прыжка)
- **Jump Curve** — кривая траектории прыжка по вертикали
- **Fixed Duration** — фиксированная длительность анимации в секундах (0 = рассчитывать по расстоянию)

## Использование

### Глобальные настройки
1. Выберите объект Field в сцене
2. Найдите компонент AnimationQueue
3. Настройте Default Move Settings

### Индивидуальные настройки префаба
1. Откройте префаб существа/предмета
2. Добавьте компонент AnimatableVisual
3. Настройте Move Settings

**Приоритет:** Если у префаба есть AnimatableVisual, используются его настройки, иначе — глобальные из AnimationQueue.

## Примеры кривых

### Горизонтальное движение (Curve)
- **Linear:** Прямая линия от (0,0) до (1,1) — равномерное движение
- **Ease In Out:** Плавное ускорение и замедление
- **Bounce:** Эффект отскока в конце
- **Custom:** Создайте свою кривую для уникальных эффектов

### Прыжки (Jump Curve)
- **Arc (дуга):** AnimationCurve с ключами (0,0), (0.5,1), (1,0) — классический прыжок дугой
- **Double Jump:** Две дуги подряд — двойной прыжок
- **Hop (подскок):** Несколько маленьких дуг — движение подскоками
- **Flat (0 высота):** Jump Height = 0 — движение без прыжка (по умолчанию)

## Примеры применения

- **Игрок (прыжками):** Fixed Duration = 0.5, EaseInOut curve, Jump Height = 0.5, Arc jump curve
- **Тяжелый юнит:** Speed = 3, EaseInOut curve, Jump Height = 0 (без прыжка)
- **Легкий юнит:** Fixed Duration = 0.3, Linear curve, Jump Height = 0.3, Hop curve (подскоки)
- **Летающий юнит:** Speed = 7, Custom волнообразная curve, Jump Height = 0
- **Телепортация:** Fixed Duration = 0.1, Custom резкая curve, Jump Height = 0

### Когда использовать Fixed Duration vs Speed

- **Fixed Duration** — для прыжков и действий с постоянным временем (игрок прыгает 0.5 сек независимо от расстояния)
- **Speed** — для плавного скольжения и передвижения (чем дальше, тем дольше длится анимация)

## Расширение

Для добавления новых типов анимаций:
1. Создайте класс настроек (как MoveAnimationSettings)
2. Добавьте поле в AnimatableVisual
3. Создайте класс анимации (реализующий IAnimation)
4. Используйте в EntityVisualManager
